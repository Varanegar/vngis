
@using System.Drawing
@using Jmelosegui.Mvc.GoogleMap

@model TrackingMap.Models.VisitorModel

    @{
        Html.GoogleMap()
          .Name("map")
          .Zoom(11)
          .FitToMarkersBounds(true)
          .Center(c => c.Latitude(35.6961111).Longitude(51.4230556))         

          .Polylines(pf =>
          {
              foreach (var line in Model.Lines)
              {
                  pf.Add()
                      .Points(ptn =>
                      {
                          foreach (var pt in line.Points)
                          {
                              ptn.Add(pt.Latitude, pt.Longitude);
                          }
                      })
                      .StrokeColor(line.Color)
                      .StrokeWeight(3);
              }             
          })
            .Markers(marker =>
            {               
                foreach (var pt in Model.MarkerPoints)
                {
                    marker.Add()
                        .Draggable(false)
                        .Id("customer_point_" + pt.Id)
                        .Longitude(pt.Longitude)
                        .Latitude(pt.Latitude)
                        .Title(pt.Desc)
                        .Icon(String.Format("~/Content/img/pin/marker{0}.png",(int)pt.PointType ), new Size(60, 60), new Point(0, 0)
                                , new Point(5, 5));
                }
                
            })
            .Render();

    }


    @(Html.GoogleMap().ScriptRegistrar())
